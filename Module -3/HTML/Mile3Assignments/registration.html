<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            margin: 0;
        }
        .register-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 450px;
            max-width: 90%;
        }
        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
            margin-top: 10px;
        }
        input:not([type="radio"]), select, textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea { resize: vertical; }
        .gender-group {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }
        .gender-group input { width: auto; }
        .gender-group label {
            font-weight: normal;
            margin-top: 0;
            display: inline;
        }
        .error-message {
            color: #d9534f;
            font-size: 0.8em;
            height: 1.2em;
            margin-bottom: 5px;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .button-group button {
            flex: 1;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .button-group button[type="reset"] {
            background-color: #6c757d;
        }
        .button-group button:hover { opacity: 0.9; }
    </style>
</head>
<body>

<div class="register-container">
    <h2>Registration Form</h2>
    
    <form id="registrationForm" action="RegistrationServlet" method="POST">
        
        <!-- UserID -->
        <label for="userId">User Id:</label>
        <input type="text" id="userId" name="userId" required maxlength="8">
        <div id="userId-msg" class="error-message"></div>

        <!-- Password -->
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>
        <div id="password-msg" class="error-message"></div>
        
        <!-- Date of Birth -->
        <label for="dob">Date Of Birth:</label>
        <input type="date" id="dob" name="dob" required>
        <div id="dob-msg" class="error-message"></div>

        <!-- Gender (Radio) -->
        <label>Gender:</label>
        <div class="gender-group">
            <input type="radio" id="male" name="gender" value="Male" required>
            <label for="male">Male</label>
            <input type="radio" id="female" name="gender" value="Female">
            <label for="female">Female</label>
        </div>

        <!-- State (Dropdown) -->
        <label for="state">State:</label>
        <select id="state" name="state" required>
            <option value="">-- Select State --</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Delhi">Delhi</option>
        </select>
        <div id="state-msg" class="error-message"></div>

        <!-- Contact Number -->
        <label for="contactNumber">Contact number:</label>
        <input type="number" id="contactNumber" name="contactNumber" required>
        <div id="contactNumber-msg" class="error-message"></div>

        <!-- Address (Text Area) -->
        <label for="address">Address:</label>
        <textarea id="address" name="address" rows="3" required></textarea>
        <div id="address-msg" class="error-message"></div>

        <div class="button-group">
            <button type="submit">submit</button>
            <button type="reset">reset</button>
        </div>
        
        <p style="text-align: center; margin-top: 15px;">
            <a href="login.html">Back to Login</a>
        </p>

    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('registrationForm');
        const userIdInput = document.getElementById('userId');
        const passwordInput = document.getElementById('password');
        const dobInput = document.getElementById('dob');
        const contactNumberInput = document.getElementById('contactNumber');
        
        const userIdMsg = document.getElementById('userId-msg');
        const passwordMsg = document.getElementById('password-msg');
        const dobMsg = document.getElementById('dob-msg');
        const contactNumberMsg = document.getElementById('contactNumber-msg');
        
        // --- Validation Functions ---

        const validateUserId = () => {
            const userId = userIdInput.value;
            userIdMsg.textContent = '';
            // Validation: min 4, max 8 characters
            if (userId.length < 4) {
                userIdMsg.textContent = 'User ID must contain minimum 4 characters.';
                return false;
            }
            if (userId.length > 8) {
                userIdMsg.textContent = 'User ID must contain maximum 8 characters.';
                return false;
            }
            return true;
        };

        const validatePassword = () => {
            const password = passwordInput.value;
            passwordMsg.textContent = '';
            
            if (password.length === 0) {
                passwordMsg.textContent = 'Password should not be empty.';
                return false;
            } else if (password.length < 6) {
                passwordMsg.textContent = 'Password can\'t be less than 6 characters.';
                return false;
            } else if (!/(?=.*[A-Z])/.test(password)) {
                passwordMsg.textContent = 'Password must contain at least one upper case.';
                return false;
            } else if (!/(?=.*[0-9])/.test(password)) {
                passwordMsg.textContent = 'Password must contain at least one number.';
                return false;
            }
            return true;
        };
        
        const validateDOB = () => {
            const dobValue = dobInput.value;
            dobMsg.textContent = '';
            
            if (!dobValue) {
                dobMsg.textContent = 'Date of Birth is required.';
                return false;
            }

            const selectedDate = new Date(dobValue);
            const today = new Date();
            
            // Set time parts to zero for accurate date comparison
            today.setHours(0, 0, 0, 0); 
            selectedDate.setHours(0, 0, 0, 0);

            // Validation: Should be less than today's date
            if (selectedDate >= today) {
                dobMsg.textContent = 'DOB should be less than today\'s date.';
                return false;
            }
            return true;
        };

        const validateContactNumber = () => {
            const number = contactNumberInput.value.trim();
            contactNumberMsg.textContent = '';
            // Validation: Exactly equal to 10 digits only
            if (!/^\d{10}$/.test(number)) {
                contactNumberMsg.textContent = 'Contact Number should be exactly equal to 10 digits only.';
                return false;
            }
            return true;
        };
        
        // --- Attach Validation Listeners ---
        userIdInput.addEventListener('input', validateUserId);
        passwordInput.addEventListener('input', validatePassword);
        dobInput.addEventListener('change', validateDOB); // Use 'change' for date input
        contactNumberInput.addEventListener('input', validateContactNumber);

        // --- Final Form Submission Handler ---
        form.addEventListener('submit', (e) => {
            // Run all validation functions using bitwise AND (&) to ensure all run
            const isValid = validateUserId() & 
                            validatePassword() & 
                            validateDOB() & 
                            validateContactNumber();

            if (!isValid) {
                e.preventDefault(); // Stop submission
            }
        });
        
    });
</script>

</body>
</html>